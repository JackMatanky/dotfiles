{{ if eq .chezmoi.os "darwin" -}}
#!/usr/bin/env bash
# Update Homebrew (single responsibility)
set -euo pipefail

{{ template "logging.sh" . }}

# Skip if existing system
[[ -f "$HOME/.config/chezmoi-initial-setup-complete" ]] && exit 0

# Ensure Homebrew is available
if ! command -v brew &>/dev/null; then
    log_error "Homebrew not found - run Homebrew installation script first"
    exit 1
fi

# Update Homebrew
brew update && log_success "Homebrew updated"
{{- end }}
