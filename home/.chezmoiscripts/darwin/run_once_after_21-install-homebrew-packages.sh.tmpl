{{ if eq .chezmoi.os "darwin" -}}
#!/usr/bin/env bash
# Update Homebrew packages (skip on existing systems)
set -euo pipefail

{{ template "logging.sh" . }}

# Skip if existing system
[[ -f "$HOME/.config/chezmoi-initial-setup-complete" ]] && exit 0

# Update and upgrade packages
if command -v brew &>/dev/null; then
    brew update
    brew upgrade
    brew cleanup --prune=all
    log_success "Homebrew packages updated"
fi
{{- end }}
