#!/bin/bash
# Set default shell to Zsh (run after every chezmoi apply)
set -e

{{ template "logging.sh" . }}

# Set Zsh as default shell if needed (this must be done via script, not shell config)
if [[ "$SHELL" != *"zsh"* ]] && command -v zsh &>/dev/null; then
    if ! grep -q "$(which zsh)" /etc/shells 2>/dev/null; then
        echo "$(which zsh)" | sudo tee -a /etc/shells >/dev/null
    fi
    chsh -s "$(which zsh)" && log_success "Default shell changed to Zsh"
fi
