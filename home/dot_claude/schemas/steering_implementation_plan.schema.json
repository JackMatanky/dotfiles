{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "~/.claude/schemas/steering_implementation_plan.schema.json",
  "title": "Steering Implementation Plan",
  "type": "object",
  "additionalProperties": false,
  "required": ["meta", "plan", "project"],
  "properties": {
    "meta": {
      "$ref": "~/.claude/schemas/meta.schema.json"
    },
    "plan": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "name",
        "version",
        "source",
        "docType",
        "createdDateTime",
        "modifiedDateTime"
      ],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1
        },
        "version": {
          "type": "string",
          "minLength": 1
        },
        "docType": {
          "type": "string",
          "const": "steering-implementation-plan"
        },
        "createdDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "modifiedDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "source": {
          "type": "object",
          "additionalProperties": false,
          "required": ["product", "tech", "structure"],
          "properties": {
            "product": {
              "type": "string",
              "minLength": 1
            },
            "tech": {
              "type": "string",
              "minLength": 1
            },
            "structure": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "project": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "order",
          "name",
          "purpose",
          "scope",
          "deliverables",
          "key_results",
          "rationale",
          "constraints",
          "risks"
        ],
        "properties": {
          "order": {
            "type": "integer",
            "minimum": 1
          },
          "name": {
            "type": "string",
            "minLength": 1
          },
          "purpose": {
            "type": "string",
            "minLength": 1
          },
          "scope": {
            "type": "object",
            "additionalProperties": false,
            "required": ["include", "exclude"],
            "properties": {
              "include": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "exclude": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              }
            }
          },
          "deliverables": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "minLength": 1
            }
          },
          "key_results": {
            "type": "object",
            "additionalProperties": false,
            "required": ["milestones"],
            "properties": {
              "milestones": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["order", "statement"],
                  "properties": {
                    "order": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "statement": {
                      "type": "string",
                      "minLength": 1
                    },
                    "metric": {
                      "type": "string"
                    },
                    "target": {
                      "type": ["string", "number"]
                    },
                    "due_date": {
                      "type": "string",
                      "format": "date"
                    },
                    "status": {
                      "type": "string",
                      "enum": ["pending", "in_progress", "met", "missed"]
                    }
                  }
                }
              }
            }
          },
          "rationale": {
            "type": "string",
            "minLength": 1
          },

          "constraints": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "budget_funding": {
                "$ref": "#/definitions/constraintArray"
              },
              "headcount_capacity": {
                "$ref": "#/definitions/constraintArray"
              },
              "program_timeline_release": {
                "$ref": "#/definitions/constraintArray"
              },
              "architectural_guardrails": {
                "$ref": "#/definitions/constraintArray"
              },
              "privacy_data_residency": {
                "$ref": "#/definitions/constraintArray"
              },
              "regulatory_compliance": {
                "$ref": "#/definitions/constraintArray"
              },
              "vendor_tooling": {
                "$ref": "#/definitions/constraintArray"
              },
              "governance_change_control": {
                "$ref": "#/definitions/constraintArray"
              },
              "operational_readiness_support": {
                "$ref": "#/definitions/constraintArray"
              },
              "other": {
                "$ref": "#/definitions/constraintArray"
              }
            }
          },

          "risks": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "strategic_alignment": {
                "$ref": "#/definitions/riskArray"
              },
              "stakeholder_sponsorship": {
                "$ref": "#/definitions/riskArray"
              },
              "resourcing_capacity": {
                "$ref": "#/definitions/riskArray"
              },
              "funding": {
                "$ref": "#/definitions/riskArray"
              },
              "scope_volatility": {
                "$ref": "#/definitions/riskArray"
              },
              "program_schedule": {
                "$ref": "#/definitions/riskArray"
              },
              "cross_team_coordination": {
                "$ref": "#/definitions/riskArray"
              },
              "vendor_contractual": {
                "$ref": "#/definitions/riskArray"
              },
              "regulatory_compliance": {
                "$ref": "#/definitions/riskArray"
              },
              "technology_feasibility": {
                "$ref": "#/definitions/riskArray"
              },
              "inter_project_dependency": {
                "$ref": "#/definitions/riskArray"
              },
              "other": {
                "$ref": "#/definitions/riskArray"
              }
            }
          },

          "parent_task": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "order",
                "name",
                "objective",
                "scope",
                "deliverables",
                "key_results",
                "dependencies",
                "implementation",
                "technical_assumptions",
                "risks",
                "interfaces",
                "constraints",
                "review_validation",
                "intermediate_milestones",
                "resource_needs"
              ],
              "properties": {
                "order": {
                  "type": "integer",
                  "minimum": 1
                },
                "name": {
                  "type": "string",
                  "minLength": 1
                },
                "objective": {
                  "type": "string",
                  "minLength": 1
                },

                "scope": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["include", "exclude"],
                  "properties": {
                    "include": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "exclude": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    }
                  }
                },

                "deliverables": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                },

                "key_results": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["milestones"],
                  "properties": {
                    "milestones": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["order", "statement"],
                        "properties": {
                          "order": {
                            "type": "integer",
                            "minimum": 1
                          },
                          "statement": {
                            "type": "string",
                            "minLength": 1
                          },
                          "metric": {
                            "type": "string"
                          },
                          "target": {
                            "type": ["string", "number"]
                          },
                          "due_date": {
                            "type": "string",
                            "format": "date"
                          },
                          "status": {
                            "type": "string",
                            "enum": ["pending", "in_progress", "met", "missed"]
                          }
                        }
                      }
                    }
                  }
                },

                "dependencies": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                },

                "implementation": {
                  "type": "string",
                  "minLength": 1
                },

                "technical_assumptions": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                },

                "risks": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "technical_design_complexity": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "development_estimation_defect": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "integration_contract": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "security_vulnerability": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "dependency_versioning": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "data_quality_lineage": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "performance_scalability": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "environment_ci_cd_tooling": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "schedule_blocking_dependency": {
                      "$ref": "#/definitions/riskArray"
                    },
                    "other": {
                      "$ref": "#/definitions/riskArray"
                    }
                  }
                },

                "interfaces": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["inputs", "outputs"],
                  "properties": {
                    "inputs": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "outputs": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "integration_notes": {
                      "type": "string"
                    }
                  }
                },

                "constraints": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "performance": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "scalability": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "reliability_slo_error_budgets": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "backward_compatibility": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "api_interface_contracts": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "data_quality_schema_rules": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "determinism_idempotency": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "security_controls": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "observability": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "test_coverage_ci": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "environment_config_mgmt": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "runbooks_rollback": {
                      "$ref": "#/definitions/constraintArray"
                    },
                    "other": {
                      "$ref": "#/definitions/constraintArray"
                    }
                  }
                },

                "review_validation": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                },

                "intermediate_milestones": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["name"],
                    "properties": {
                      "name": {
                        "type": "string",
                        "minLength": 1
                      },
                      "target_date": {
                        "type": "string"
                      },
                      "notes": {
                        "type": "string"
                      }
                    }
                  }
                },

                "resource_needs": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "people": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["role"],
                        "properties": {
                          "role": {
                            "type": "string",
                            "minLength": 1
                          },
                          "count": {
                            "type": "integer",
                            "minimum": 1
                          },
                          "skills": {
                            "type": "array",
                            "items": {
                              "type": "string",
                              "minLength": 1
                            }
                          }
                        }
                      }
                    },
                    "tools": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "infrastructure": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "budget_note": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "riskArray": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["description"],
        "properties": {
          "description": {
            "type": "string",
            "minLength": 1
          },
          "likelihood": {
            "type": "string"
          },
          "impact": {
            "type": "string"
          },
          "mitigation": {
            "type": "string"
          }
        }
      }
    },
    "constraintArray": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["description"],
        "properties": {
          "description": {
            "type": "string",
            "minLength": 1
          },
          "notes": {
            "type": "string"
          }
        }
      }
    }
  }
}
